b4w.register("flight_main",function(M,c){function N(){l.pause();var a=document.querySelector("#pl_cont"),b=a.querySelector("#pl_frame");y=document.querySelector("#pl_bar");z=document.querySelector("#pl_caption");A=document.querySelector("#pl_fill");m.css_animate(a,"opacity",0,1,500,"","",function(){l.resume();b.style.opacity=1})}function B(){O.resize_to_container()}function P(){var a=C.get_std_assets_path();D.set_debug_resources_root("/flight_over_island/");D.load(a+"flight_over_island/flight_over_island.json",
Q,R,!1);B()}function Q(){g=E.get_active_camera();var a=E.get_object_by_dupli_name,b=e.set_behavior,d=e.apply;k=a("Cessna Rig","Cessna Armature");v=a("Cessna Rig","Engine Speaker");n=a("golf_player_fmale_rig","rig");d(g,"CameraAction.001");b(g,e.AB_CYCLIC);d(k,"fly_cessna");b(k,e.AB_FINISH_STOP);d(n,"fly_girl");b(n,e.AB_FINISH_STOP);F(k,v,n);w();l.set_render_callback(S);p=!0}function F(a,b,d){q.speaker_stride(b);e.set_first_frame(a);e.play(a,T);e.stop(d);e.set_first_frame(d);e.play(d)}function w(){switch(f){case G:f=
r;e.stop(g);break;case r:f=x;e.stop(g);q.listener_stride();break;case x:f=t;e.play(g);q.listener_stride();break;case t:f=r,e.stop(g),q.listener_stride()}}function H(a,b){var d=document.getElementById(a),c=d.cloneNode(!0);d.parentNode.replaceChild(c,d);c.addEventListener("mouseup",function(c){var d=document.getElementById(a),e=document.querySelector("#glow_down"),f=document.createElement("div");f.id="glow";f.style.top=c.target.offsetTop-25+"px";e&&(h.removeChild(e),h.appendChild(f));d.className=d.className.replace("button_down",
"");b()},!1);c.addEventListener("mouseover",function(a){if(!("ontouchstart"in window||0<window.navigator.a)){a=a.target;var b=document.querySelector("#glow");b||(b=document.createElement("div"),b.id="glow",b.style.top=a.offsetTop,h.appendChild(b));b.style.top=a.offsetTop-20+"px"}},!1);c.addEventListener("mouseout",function(){var b=document.getElementById(a);b.className=b.className.replace("button_down","");I()},!1);c.addEventListener("mousedown",function(b){if(!("ontouchstart"in window||0<window.navigator.a)){I();
var c=document.getElementById(a),d=document.createElement("div");d.id="glow_down";d.style.marginTop=b.target.offsetTop-28+"px";h.appendChild(d);c.className+=" button_down"}},!1)}function I(){var a=document.querySelector("#glow_down"),b=document.querySelector("#glow");b&&h.removeChild(b);a&&h.removeChild(a)}function J(a){document.getElementById("pause_resume").className=a+" controls_button"}function R(a){y.style.width=a/(460/295)+"%";A.style.width=100-a+"%";z.innerHTML=a+"%";if(100==a){var b=document.querySelector("#pl_cont");
a=b.querySelector("#pl_frame");var c=document.querySelector("#scroll_panel");a.style.opacity=0;m.css_animate(b,"opacity",1,0,1E3,"","",function(){m.css_animate(c,"opacity",0,1,500);b.parentNode.removeChild(b)})}}function T(){f!=t&&w();F(k,v,n)}function S(){if(f!=t){U.get_bone_tsr(k,"Root",K);var a=L.get_trans_view(K);if(f==x)var b=V;else f==r&&(b=W,X.add(a,Y,b));Z.eye_set_look_at(g,b,a)}}var e=c("animation"),U=c("armature"),m=c("app"),Z=c("camera"),C=c("config"),O=c("container"),D=c("data"),l=c("main");
c("preloader");var E=c("scenes"),q=c("sfx"),L=c("tsr"),u=c("version"),X=c("vec3"),u="DEBUG"===u.type(),Y=new Float32Array([13,4.5,13]),V=new Float32Array([-20,2,120]),aa={canvas_container_id:"main_canvas_container",callback:function(a,b){b?(h=document.querySelector("#hover_panel"),N(),H("pause_resume",function(){p?(p=!1,l.pause(),J("resume")):(p=!0,l.resume(),J("pause"))}),H("camera_view",function(){p&&w()}),window.addEventListener("resize",B,!1),document.addEventListener("keydown",function(a){13==
a.keyCode&&m.request_fullscreen(document.body)},!1),P()):console.log("b4w init failure")},gl_debug:!1,show_fps:!1,alpha:!1,physics_enabled:!1,console_verbose:u,assets_dds_available:!u,assets_min50_available:!1,quality:C.P_HIGH},G=10,r=20,x=30,t=40,W=new Float32Array(3),K=L.create(),k=null,v=null,n=null,g=null,p=!1,f=G,h,y=null,A=null,z=null;M.init=function(){m.init(aa)}});b4w.require("flight_main").init();
